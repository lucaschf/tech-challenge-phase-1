apiVersion: v1
kind: ConfigMap
metadata:
  name: alembic-config
data:
  alembic.ini: |
    [alembic]
    script_location = migrations
    file_template = %%(year)d%%(month).2d%%(day).2d%%(hour).2d%%(minute).2d-%%(rev)s-%%(slug)s
    prepend_sys_path = .
    version_path_separator = os
    output_encoding = utf-8
    sqlalchemy.url = driver://user:pass@localhost/dbname

    [post_write_hooks]
    # hooks for post-generation formatting, such as black
    # Example of hook to use "black" code formatter

    [loggers]
    keys = root,sqlalchemy,alembic

    [handlers]
    keys = console

    [formatters]
    keys = generic

    [logger_root]
    level = WARN
    handlers = console
    qualname =

    [logger_sqlalchemy]
    level = WARN
    handlers =
    qualname = sqlalchemy.engine

    [logger_alembic]
    level = INFO
    handlers =
    qualname = alembic

    [handler_console]
    class = StreamHandler
    args = (sys.stderr,)
    level = NOTSET
    formatter = generic

    [formatter_generic]
    format = %(levelname)-5.5s [%(name)s] %(message)s
    datefmt = %H:%M:%S
